{"version":3,"sources":["webpack/bootstrap","C:\\Develop\\mjesteve\\LibreriasJS\\fullcalendar-yearview\\node_modules\\tslib\\tslib.es6.js","C:/Develop/mjesteve/LibreriasJS/fullcalendar-yearview/src\\AbstractDayGridView.ts","C:/Develop/mjesteve/LibreriasJS/fullcalendar-yearview/src\\DayBgRow.ts","C:/Develop/mjesteve/LibreriasJS/fullcalendar-yearview/src\\DayGrid.ts","C:/Develop/mjesteve/LibreriasJS/fullcalendar-yearview/src\\DayGridDateProfileGenerator.ts","C:/Develop/mjesteve/LibreriasJS/fullcalendar-yearview/src\\DayGridEventRenderer.ts","C:/Develop/mjesteve/LibreriasJS/fullcalendar-yearview/src\\DayGridFillRenderer.ts","C:/Develop/mjesteve/LibreriasJS/fullcalendar-yearview/src\\DayGridMirrorRenderer.ts","C:/Develop/mjesteve/LibreriasJS/fullcalendar-yearview/src\\DayGridView.ts","C:/Develop/mjesteve/LibreriasJS/fullcalendar-yearview/src\\DayTable.ts","C:/Develop/mjesteve/LibreriasJS/fullcalendar-yearview/src\\DayTile.ts","C:/Develop/mjesteve/LibreriasJS/fullcalendar-yearview/src\\Popover.ts","C:/Develop/mjesteve/LibreriasJS/fullcalendar-yearview/src\\SimpleDayGrid.ts","C:/Develop/mjesteve/LibreriasJS/fullcalendar-yearview/src\\SimpleDayGridEventRenderer.ts","C:\\Develop\\mjesteve\\LibreriasJS\\fullcalendar-yearview\\src\\main.scss","C:/Develop/mjesteve/LibreriasJS/fullcalendar-yearview/src\\main.ts","external \"@fullcalendar/core\"","external \"moment\""],"names":[],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/main.ts\");\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import {\r\n  htmlEscape, createElement, findElements,\r\n  matchCellWidths,\r\n  uncompensateScroll,\r\n  compensateScroll,\r\n  subtractInnerElHeight,\r\n  distributeHeight,\r\n  undistributeHeight,\r\n  createFormatter,\r\n  ScrollComponent,\r\n  View,\r\n  buildGotoAnchorHtml,\r\n  ComponentContext,\r\n  ViewSpec,\r\n  DateProfileGenerator,\r\n  Duration\r\n} from '@fullcalendar/core'\r\nimport DayGridDateProfileGenerator from './DayGridDateProfileGenerator'\r\nimport DayGrid from './DayGrid'\r\n\r\nconst WEEK_NUM_FORMAT = createFormatter({ week: 'numeric' })\r\n\r\n\r\n/* An abstract class for the daygrid views, as well as month view. Renders one or more rows of day cells.\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n// It is a manager for a DayGrid subcomponent, which does most of the heavy lifting.\r\n// It is responsible for managing width/height.\r\n\r\nexport default abstract class DayGridView extends View {\r\n\r\n  scroller: ScrollComponent\r\n  dayGrid: DayGrid // the main subcomponent that does most of the heavy lifting\r\n\r\n  colWeekNumbersVisible: boolean\r\n  weekNumberWidth: number\r\n\r\n\r\n  constructor(context: ComponentContext, viewSpec: ViewSpec, dateProfileGenerator: DateProfileGenerator, parentEl: HTMLElement) {\r\n    super(context, viewSpec, dateProfileGenerator, parentEl)\r\n\r\n    this.el.classList.add('fc-dayGrid-view')\r\n    this.el.innerHTML = this.renderSkeletonHtml()\r\n\r\n    this.scroller = new ScrollComponent(\r\n      'hidden', // overflow x\r\n      'auto' // overflow y\r\n    )\r\n\r\n    let dayGridContainerEl = this.scroller.el\r\n    this.el.querySelector('.fc-body > tr > td').appendChild(dayGridContainerEl)\r\n    dayGridContainerEl.classList.add('fc-day-grid-container')\r\n    dayGridContainerEl.classList.add('fc-year-container')\r\n    let dayGridEl = createElement('div', { className: 'fc-day-grid' })\r\n    dayGridContainerEl.appendChild(dayGridEl)\r\n\r\n    let cellWeekNumbersVisible\r\n\r\n    if (this.opt('weekNumbers')) {\r\n      if (this.opt('weekNumbersWithinDays')) {\r\n        cellWeekNumbersVisible = true\r\n        this.colWeekNumbersVisible = false\r\n      } else {\r\n        cellWeekNumbersVisible = false\r\n        this.colWeekNumbersVisible = true\r\n      }\r\n    } else {\r\n      this.colWeekNumbersVisible = false\r\n      cellWeekNumbersVisible = false\r\n    }\r\n\r\n    this.dayGrid = new DayGrid(\r\n      this.context,\r\n      dayGridEl,\r\n      {\r\n        renderNumberIntroHtml: this.renderDayGridNumberIntroHtml,\r\n        renderBgIntroHtml: this.renderDayGridBgIntroHtml,\r\n        renderIntroHtml: this.renderDayGridIntroHtml,\r\n        colWeekNumbersVisible: this.colWeekNumbersVisible,\r\n        cellWeekNumbersVisible\r\n      }\r\n    )\r\n  }\r\n\r\n\r\n  destroy() {\r\n    super.destroy()\r\n\r\n    this.dayGrid.destroy()\r\n    this.scroller.destroy()\r\n  }\r\n\r\n  // Builds the HTML skeleton for the view.\r\n  // The day-grid component will render inside of a container defined by this HTML.\r\n  renderSkeletonHtml() {\r\n    let { theme } = this\r\n\r\n    return '' +\r\n      '<table class=\"' + theme.getClass('tableGrid') + '\">' +\r\n        (this.opt('columnHeader') ?\r\n          '<thead class=\"fc-head\">' +\r\n            '<tr>' +\r\n              '<td class=\"fc-head-container ' + theme.getClass('widgetHeader') + '\">&nbsp;</td>' +\r\n            '</tr>' +\r\n          '</thead>' :\r\n          ''\r\n          ) +\r\n        '<tbody class=\"fc-body\">' +\r\n          '<tr>' +\r\n            '<td class=\"' + theme.getClass('widgetContent') + '\"></td>' +\r\n          '</tr>' +\r\n        '</tbody>' +\r\n      '</table>'\r\n  }\r\n\r\n\r\n  // Generates an HTML attribute string for setting the width of the week number column, if it is known\r\n  weekNumberStyleAttr() {\r\n    if (this.weekNumberWidth != null) {\r\n      return 'style=\"width:' + this.weekNumberWidth + 'px\"'\r\n    }\r\n    return ''\r\n  }\r\n\r\n\r\n  // Determines whether each row should have a constant height\r\n  hasRigidRows() {\r\n    let eventLimit = this.opt('eventLimit')\r\n\r\n    return eventLimit && typeof eventLimit !== 'number'\r\n  }\r\n\r\n\r\n  /* Dimensions\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  updateSize(isResize: boolean, viewHeight: number, isAuto: boolean) {\r\n    super.updateSize(isResize, viewHeight, isAuto) // will call updateBaseSize. important that executes first\r\n\r\n    this.dayGrid.updateSize(isResize)\r\n  }\r\n\r\n\r\n  // Refreshes the horizontal dimensions of the view\r\n  updateBaseSize(isResize: boolean, viewHeight: number, isAuto: boolean) {\r\n    let { dayGrid } = this\r\n    let eventLimit = this.opt('eventLimit')\r\n    let headRowEl = (this as any).header ? (this as any).header.el : null // HACK\r\n    let scrollerHeight\r\n    let scrollbarWidths\r\n\r\n    // hack to give the view some height prior to dayGrid's columns being rendered\r\n    // TODO: separate setting height from scroller VS dayGrid.\r\n    if (!dayGrid.rowEls) {\r\n      if (!isAuto) {\r\n        scrollerHeight = this.computeScrollerHeight(viewHeight)\r\n        this.scroller.setHeight(scrollerHeight)\r\n      }\r\n      return\r\n    }\r\n\r\n    if (this.colWeekNumbersVisible) {\r\n      // Make sure all week number cells running down the side have the same width.\r\n      this.weekNumberWidth = matchCellWidths(\r\n        findElements(this.el, '.fc-week-number')\r\n      )\r\n    }\r\n\r\n    // reset all heights to be natural\r\n    this.scroller.clear()\r\n    if (headRowEl) {\r\n      uncompensateScroll(headRowEl)\r\n    }\r\n\r\n    dayGrid.removeSegPopover() // kill the \"more\" popover if displayed\r\n\r\n    // is the event limit a constant level number?\r\n    if (eventLimit && typeof eventLimit === 'number') {\r\n      dayGrid.limitRows(eventLimit) // limit the levels first so the height can redistribute after\r\n    }\r\n\r\n    // distribute the height to the rows\r\n    // (viewHeight is a \"recommended\" value if isAuto)\r\n    scrollerHeight = this.computeScrollerHeight(viewHeight)\r\n    this.setGridHeight(scrollerHeight, isAuto)\r\n\r\n    // is the event limit dynamically calculated?\r\n    if (eventLimit && typeof eventLimit !== 'number') {\r\n      dayGrid.limitRows(eventLimit) // limit the levels after the grid's row heights have been set\r\n    }\r\n\r\n    if (!isAuto) { // should we force dimensions of the scroll container?\r\n\r\n      this.scroller.setHeight(scrollerHeight)\r\n      scrollbarWidths = this.scroller.getScrollbarWidths()\r\n\r\n      if (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\r\n\r\n        if (headRowEl) {\r\n          compensateScroll(headRowEl, scrollbarWidths)\r\n        }\r\n\r\n        // doing the scrollbar compensation might have created text overflow which created more height. redo\r\n        scrollerHeight = this.computeScrollerHeight(viewHeight)\r\n        this.scroller.setHeight(scrollerHeight)\r\n      }\r\n\r\n      // guarantees the same scrollbar widths\r\n      this.scroller.lockOverflow(scrollbarWidths)\r\n    }\r\n  }\r\n\r\n\r\n  // given a desired total height of the view, returns what the height of the scroller should be\r\n  computeScrollerHeight(viewHeight) {\r\n    return viewHeight -\r\n      subtractInnerElHeight(this.el, this.scroller.el) // everything that's NOT the scroller\r\n  }\r\n\r\n\r\n  // Sets the height of just the DayGrid component in this view\r\n  setGridHeight(height, isAuto) {\r\n\r\n    if (this.opt('monthMode')) {\r\n\r\n      // if auto, make the height of each row the height that it would be if there were 6 weeks\r\n      if (isAuto) {\r\n        height *= this.dayGrid.rowCnt / 6\r\n      }\r\n\r\n      distributeHeight(this.dayGrid.rowEls, height, !isAuto) // if auto, don't compensate for height-hogging rows\r\n\r\n    } else {\r\n\r\n      if (isAuto) {\r\n        undistributeHeight(this.dayGrid.rowEls) // let the rows be their natural height with no expanding\r\n      } else {\r\n        distributeHeight(this.dayGrid.rowEls, height, true) // true = compensate for height-hogging rows\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /* Scroll\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  computeDateScroll(duration: Duration) {\r\n    return { top: 0 }\r\n  }\r\n\r\n\r\n  queryDateScroll() {\r\n    return { top: this.scroller.getScrollTop() }\r\n  }\r\n\r\n\r\n  applyDateScroll(scroll) {\r\n    if (scroll.top !== undefined) {\r\n      this.scroller.setScrollTop(scroll.top)\r\n    }\r\n  }\r\n\r\n\r\n  /* Header Rendering\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Generates the HTML that will go before the day-of week header cells\r\n  renderHeadIntroHtml = () => {\r\n    let { theme } = this\r\n\r\n    if (this.colWeekNumbersVisible) {\r\n      return '' +\r\n        '<th class=\"fc-week-number ' + theme.getClass('widgetHeader') + '\" ' + this.weekNumberStyleAttr() + '>' +\r\n          '<span>' + // needed for matchCellWidths\r\n            htmlEscape(this.opt('weekLabel')) +\r\n          '</span>' +\r\n        '</th>'\r\n    }\r\n\r\n    return ''\r\n  }\r\n\r\n\r\n  /* Day Grid Rendering\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Generates the HTML that will go before content-skeleton cells that display the day/week numbers\r\n  renderDayGridNumberIntroHtml = (row: number, dayGrid: DayGrid) => {\r\n    let { dateEnv } = this\r\n    let weekStart = dayGrid.props.cells[row][0].date\r\n\r\n    if (this.colWeekNumbersVisible) {\r\n      return '' +\r\n        '<td class=\"fc-week-number\" ' + this.weekNumberStyleAttr() + '>' +\r\n          buildGotoAnchorHtml( // aside from link, important for matchCellWidths\r\n            this,\r\n            { date: weekStart, type: 'week', forceOff: dayGrid.colCnt === 1 },\r\n            dateEnv.format(weekStart, WEEK_NUM_FORMAT) // inner HTML\r\n          ) +\r\n        '</td>'\r\n    }\r\n\r\n    return ''\r\n  }\r\n\r\n\r\n  // Generates the HTML that goes before the day bg cells for each day-row\r\n  renderDayGridBgIntroHtml = () => {\r\n    let { theme } = this\r\n\r\n    if (this.colWeekNumbersVisible) {\r\n      return '<td class=\"fc-week-number ' + theme.getClass('widgetContent') + '\" ' + this.weekNumberStyleAttr() + '></td>'\r\n    }\r\n\r\n    return ''\r\n  }\r\n\r\n\r\n  // Generates the HTML that goes before every other type of row generated by DayGrid.\r\n  // Affects mirror-skeleton and highlight-skeleton rows.\r\n  renderDayGridIntroHtml = () => {\r\n\r\n    if (this.colWeekNumbersVisible) {\r\n      return '<td class=\"fc-week-number\" ' + this.weekNumberStyleAttr() + '></td>'\r\n    }\r\n\r\n    return ''\r\n  }\r\n\r\n}\r\n\r\nDayGridView.prototype.dateProfileGeneratorClass = DayGridDateProfileGenerator\r\n","import {\r\n  ComponentContext,\r\n  DateMarker,\r\n  getDayClasses,\r\n  rangeContainsMarker,\r\n  DateProfile\r\n} from '@fullcalendar/core'\r\n\r\nexport interface DayBgCell {\r\n  date: DateMarker\r\n  htmlAttrs?: string\r\n}\r\n\r\nexport interface DayBgRowProps {\r\n  cells: DayBgCell[]\r\n  dateProfile: DateProfile\r\n  renderIntroHtml?: () => string\r\n}\r\n\r\nexport default class DayBgRow {\r\n\r\n  context: ComponentContext\r\n\r\n  constructor(context: ComponentContext) {\r\n    this.context = context\r\n  }\r\n\r\n  renderHtml(props: DayBgRowProps) {\r\n    let parts = []\r\n\r\n    if (props.renderIntroHtml) {\r\n      parts.push(props.renderIntroHtml())\r\n    }\r\n\r\n    for (let cell of props.cells) {\r\n      parts.push(\r\n        renderCellHtml(\r\n          cell.date,\r\n          props.dateProfile,\r\n          this.context,\r\n          cell.htmlAttrs\r\n        )\r\n      )\r\n    }\r\n\r\n    if (!props.cells.length) {\r\n      parts.push('<td class=\"fc-day ' + this.context.theme.getClass('widgetContent') + '\"></td>')\r\n    }\r\n\r\n    if (this.context.options.dir === 'rtl') {\r\n      parts.reverse()\r\n    }\r\n\r\n    return '<tr>' + parts.join('') + '</tr>'\r\n  }\r\n\r\n}\r\n\r\nfunction renderCellHtml(date: DateMarker, dateProfile: DateProfile, context: ComponentContext, otherAttrs?) {\r\n  let { dateEnv, theme } = context\r\n  let isDateValid = rangeContainsMarker(dateProfile.activeRange, date) // TODO: called too frequently. cache somehow.\r\n  let classes = getDayClasses(date, dateProfile, context)\r\n\r\n  classes.unshift('fc-day', theme.getClass('widgetContent'))\r\n\r\n  return '<td class=\"' + classes.join(' ') + '\"' +\r\n    (isDateValid ?\r\n      ' data-date=\"' + dateEnv.formatIso(date, { omitTime: true }) + '\"' :\r\n      '') +\r\n    (otherAttrs ?\r\n      ' ' + otherAttrs :\r\n      '') +\r\n    '></td>'\r\n}\r\n","import {\r\n  createElement,\r\n  insertAfterElement,\r\n  findElements,\r\n  findChildren,\r\n  removeElement,\r\n  computeRect,\r\n  PositionCache,\r\n  addDays,\r\n  DateMarker,\r\n  createFormatter,\r\n  DateComponent,\r\n  EventSegUiInteractionState,\r\n  Seg,\r\n  rangeContainsMarker,\r\n  intersectRanges,\r\n  EventRenderRange,\r\n  buildGotoAnchorHtml,\r\n  getDayClasses,\r\n  DateProfile,\r\n  memoizeRendering,\r\n  MemoizedRendering\r\n} from '@fullcalendar/core'\r\nimport Popover from './Popover'\r\nimport DayGridEventRenderer from './DayGridEventRenderer'\r\nimport DayGridMirrorRenderer from './DayGridMirrorRenderer'\r\nimport DayGridFillRenderer from './DayGridFillRenderer'\r\nimport DayTile from './DayTile'\r\nimport DayBgRow from './DayBgRow'\r\nimport moment from 'moment'\r\n\r\nconst DAY_NUM_FORMAT = createFormatter({ day: 'numeric' })\r\nconst WEEK_NUM_FORMAT = createFormatter({ week: 'numeric' })\r\n\r\n\r\n/* A component that renders a grid of whole-days that runs horizontally. There can be multiple rows, one per week.\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nexport interface RenderProps { // TODO: combine with DayGridProps\r\n  renderNumberIntroHtml: (row: number, dayGrid: DayGrid) => string\r\n  renderBgIntroHtml: () => string\r\n  renderIntroHtml: () => string\r\n  colWeekNumbersVisible: boolean // week numbers render in own column? (caller does HTML via intro)\r\n  cellWeekNumbersVisible: boolean // display week numbers in day cell?\r\n}\r\n\r\nexport interface DayGridSeg extends Seg {\r\n  row: number\r\n  firstCol: number\r\n  lastCol: number\r\n}\r\n\r\nexport interface DayGridCell {\r\n  date: DateMarker\r\n  htmlAttrs?: string\r\n}\r\n\r\nexport interface DayGridProps {\r\n  dateProfile: DateProfile\r\n  cells: DayGridCell[][]\r\n  businessHourSegs: DayGridSeg[]\r\n  bgEventSegs: DayGridSeg[]\r\n  fgEventSegs: DayGridSeg[]\r\n  dateSelectionSegs: DayGridSeg[]\r\n  eventSelection: string\r\n  eventDrag: EventSegUiInteractionState | null\r\n  eventResize: EventSegUiInteractionState | null\r\n\r\n  // isRigid determines whether the individual rows should ignore the contents and be a constant height.\r\n  // Relies on the view's colCnt and rowCnt. In the future, this component should probably be self-sufficient.\r\n  isRigid: boolean\r\n}\r\n\r\nexport default class DayGrid extends DateComponent<DayGridProps> {\r\n\r\n  eventRenderer: DayGridEventRenderer\r\n  renderProps: RenderProps\r\n\r\n  rowCnt: number\r\n  colCnt: number\r\n\r\n  bottomCoordPadding: number = 0 // hack for extending the hit area for the last row of the coordinate grid\r\n\r\n  rowEls: HTMLElement[] // set of fake row elements\r\n  cellEls: HTMLElement[] // set of whole-day elements comprising the row's background\r\n\r\n  isCellSizesDirty: boolean = false\r\n  rowPositions: PositionCache\r\n  colPositions: PositionCache\r\n\r\n  segPopover: Popover // the Popover that holds events that can't fit in a cell. null when not visible\r\n  segPopoverTile: DayTile\r\n\r\n  private renderCells: MemoizedRendering<[DayGridCell[][], boolean]>\r\n  private renderBusinessHours: MemoizedRendering<[DayGridSeg[]]>\r\n  private renderDateSelection: MemoizedRendering<[DayGridSeg[]]>\r\n  private renderBgEvents: MemoizedRendering<[DayGridSeg[]]>\r\n  private renderFgEvents: MemoizedRendering<[DayGridSeg[]]>\r\n  private renderEventSelection: MemoizedRendering<[string]>\r\n  private renderEventDrag: MemoizedRendering<[EventSegUiInteractionState]>\r\n  private renderEventResize: MemoizedRendering<[EventSegUiInteractionState]>\r\n\r\n\r\n  constructor(context, el, renderProps: RenderProps) {\r\n    super(context, el)\r\n\r\n    let eventRenderer = this.eventRenderer = new DayGridEventRenderer(this)\r\n    let fillRenderer = this.fillRenderer = new DayGridFillRenderer(this)\r\n    this.mirrorRenderer = new DayGridMirrorRenderer(this)\r\n\r\n    let renderCells = this.renderCells = memoizeRendering(\r\n      this._renderCells,\r\n      this._unrenderCells\r\n    )\r\n\r\n    this.renderBusinessHours = memoizeRendering(\r\n      fillRenderer.renderSegs.bind(fillRenderer, 'businessHours'),\r\n      fillRenderer.unrender.bind(fillRenderer, 'businessHours'),\r\n      [ renderCells ]\r\n    )\r\n\r\n    this.renderDateSelection = memoizeRendering(\r\n      fillRenderer.renderSegs.bind(fillRenderer, 'highlight'),\r\n      fillRenderer.unrender.bind(fillRenderer, 'highlight'),\r\n      [ renderCells ]\r\n    )\r\n\r\n    this.renderBgEvents = memoizeRendering(\r\n      fillRenderer.renderSegs.bind(fillRenderer, 'bgEvent'),\r\n      fillRenderer.unrender.bind(fillRenderer, 'bgEvent'),\r\n      [ renderCells ]\r\n    )\r\n\r\n    this.renderFgEvents = memoizeRendering(\r\n      eventRenderer.renderSegs.bind(eventRenderer),\r\n      eventRenderer.unrender.bind(eventRenderer),\r\n      [ renderCells ]\r\n    )\r\n\r\n    this.renderEventSelection = memoizeRendering(\r\n      eventRenderer.selectByInstanceId.bind(eventRenderer),\r\n      eventRenderer.unselectByInstanceId.bind(eventRenderer),\r\n      [ this.renderFgEvents ]\r\n    )\r\n\r\n    this.renderEventDrag = memoizeRendering(\r\n      this._renderEventDrag,\r\n      this._unrenderEventDrag,\r\n      [ renderCells ]\r\n    )\r\n\r\n    this.renderEventResize = memoizeRendering(\r\n      this._renderEventResize,\r\n      this._unrenderEventResize,\r\n      [ renderCells ]\r\n    )\r\n\r\n    this.renderProps = renderProps\r\n  }\r\n\r\n\r\n  render(props: DayGridProps) {\r\n    let cells = props.cells\r\n    this.rowCnt = cells.length\r\n    this.colCnt = cells[0].length\r\n\r\n    this.renderCells(cells, props.isRigid)\r\n    this.renderBusinessHours(props.businessHourSegs)\r\n    this.renderDateSelection(props.dateSelectionSegs)\r\n    this.renderBgEvents(props.bgEventSegs)\r\n    this.renderFgEvents(props.fgEventSegs)\r\n    this.renderEventSelection(props.eventSelection)\r\n    this.renderEventDrag(props.eventDrag)\r\n    this.renderEventResize(props.eventResize)\r\n\r\n    if (this.segPopoverTile) {\r\n      this.updateSegPopoverTile()\r\n    }\r\n  }\r\n\r\n\r\n  destroy() {\r\n    super.destroy()\r\n\r\n    this.renderCells.unrender() // will unrender everything else\r\n  }\r\n\r\n\r\n  getCellRange(row, col) {\r\n    let start = this.props.cells[row][col].date\r\n    let end = addDays(start, 1)\r\n\r\n    return { start, end }\r\n  }\r\n\r\n\r\n  updateSegPopoverTile(date?, segs?) {\r\n    let ownProps = this.props\r\n\r\n    this.segPopoverTile.receiveProps({\r\n      date: date || (this.segPopoverTile.props as any).date,\r\n      fgSegs: segs || (this.segPopoverTile.props as any).fgSegs,\r\n      eventSelection: ownProps.eventSelection,\r\n      eventDragInstances: ownProps.eventDrag ? ownProps.eventDrag.affectedInstances : null,\r\n      eventResizeInstances: ownProps.eventResize ? ownProps.eventResize.affectedInstances : null\r\n    })\r\n  }\r\n\r\n\r\n  /* Date Rendering\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  _renderCells(cells: DayGridCell[][], isRigid: boolean) {\r\n    let { view, dateEnv } = this\r\n    let { rowCnt, colCnt } = this\r\n    let html = ''\r\n    let row\r\n    let col\r\n\r\n    for (row = 0; row < rowCnt; row++) {\r\n      html += this.renderDayRowHtml(row, isRigid)\r\n    }\r\n    this.el.innerHTML = html\r\n\r\n    this.rowEls = findElements(this.el, '.fc-row')\r\n    this.cellEls = findElements(this.el, '.fc-day, .fc-disabled-day')\r\n\r\n    if (this.isRtl) {\r\n      this.cellEls.reverse()\r\n    }\r\n\r\n    this.rowPositions = new PositionCache(\r\n      this.el,\r\n      this.rowEls,\r\n      false,\r\n      true // vertical\r\n    )\r\n\r\n    this.colPositions = new PositionCache(\r\n      this.el,\r\n      this.cellEls.slice(0, colCnt), // only the first row\r\n      true,\r\n      false // horizontal\r\n    )\r\n\r\n    // trigger dayRender with each cell's element\r\n    for (row = 0; row < rowCnt; row++) {\r\n      for (col = 0; col < colCnt; col++) {\r\n        if (cells[row][col] === undefined) {\r\n          break\r\n        }\r\n        if (cells[row][col].date != null) {\r\n          this.publiclyTrigger('dayRender', [\r\n            {\r\n              date: dateEnv.toDate(cells[row][col].date),\r\n              el: this.getCellEl(row, col),\r\n              view\r\n            }\r\n          ])\r\n        }\r\n      }\r\n    }\r\n\r\n    this.isCellSizesDirty = true\r\n  }\r\n\r\n\r\n  _unrenderCells() {\r\n    this.removeSegPopover()\r\n  }\r\n\r\n\r\n  // Generates the HTML for a single row, which is a div that wraps a table.\r\n  // `row` is the row number.\r\n  renderDayRowHtml(row, isRigid) {\r\n    let { theme } = this\r\n    let classes = [ 'fc-row', 'fc-week', theme.getClass('dayRow') ]\r\n\r\n    if (isRigid) {\r\n      classes.push('fc-rigid')\r\n    }\r\n\r\n    let bgRow = new DayBgRow(this.context)\r\n\r\n    return '' +\r\n      '<div class=\"' + classes.join(' ') + '\">' +\r\n        '<div class=\"fc-row-monthname fc-content\"><span>' + moment(this.props.cells[row][0].date).format('MMM') + '</span></div>' +\r\n        '<div class=\"fc-bg\">' +\r\n          '<table class=\"' + theme.getClass('tableGrid') + '\">' +\r\n            bgRow.renderHtml({\r\n              cells: this.props.cells[row],\r\n              dateProfile: this.props.dateProfile,\r\n              renderIntroHtml: this.renderProps.renderBgIntroHtml\r\n            }) +\r\n          '</table>' +\r\n        '</div>' +\r\n        '<div class=\"fc-content-skeleton\">' +\r\n          '<table>' +\r\n            (this.getIsNumbersVisible() ?\r\n              '<thead>' +\r\n                this.renderNumberTrHtml(row) +\r\n              '</thead>' :\r\n              ''\r\n              ) +\r\n          '</table>' +\r\n        '</div>' +\r\n      '</div>'\r\n  }\r\n\r\n\r\n  getIsNumbersVisible() {\r\n    return this.getIsDayNumbersVisible() ||\r\n      this.renderProps.cellWeekNumbersVisible ||\r\n      this.renderProps.colWeekNumbersVisible\r\n  }\r\n\r\n\r\n  getIsDayNumbersVisible() {\r\n    return this.rowCnt > 1\r\n  }\r\n\r\n\r\n  /* Grid Number Rendering\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  renderNumberTrHtml(row: number) {\r\n    let intro = this.renderProps.renderNumberIntroHtml(row, this)\r\n\r\n    return '' +\r\n      '<tr>' +\r\n        (this.isRtl ? '' : intro) +\r\n        this.renderNumberCellsHtml(row) +\r\n        (this.isRtl ? intro : '') +\r\n      '</tr>'\r\n  }\r\n\r\n\r\n  renderNumberCellsHtml(row) {\r\n    let htmls = []\r\n    let col\r\n    let date\r\n\r\n    for (col = 0; col < this.colCnt; col++) {\r\n      date = this.props.cells[row][col].date\r\n      htmls.push(this.renderNumberCellHtml(date))\r\n    }\r\n\r\n    if (this.isRtl) {\r\n      htmls.reverse()\r\n    }\r\n\r\n    return htmls.join('')\r\n  }\r\n\r\n\r\n  // Generates the HTML for the <td>s of the \"number\" row in the DayGrid's content skeleton.\r\n  // The number row will only exist if either day numbers or week numbers are turned on.\r\n  renderNumberCellHtml(date) {\r\n    if (date === null) {\r\n      return '<td></td>'\r\n    }\r\n    let { view, dateEnv } = this\r\n    let html = ''\r\n    let isDateValid = rangeContainsMarker(this.props.dateProfile.activeRange, date) // TODO: called too frequently. cache somehow.\r\n    let isDayNumberVisible = this.getIsDayNumbersVisible() && isDateValid\r\n    let classes\r\n    let weekCalcFirstDow\r\n\r\n    if (!isDayNumberVisible && !this.renderProps.cellWeekNumbersVisible) {\r\n      // no numbers in day cell (week number must be along the side)\r\n      return '<td></td>' //  will create an empty space above events :(\r\n    }\r\n\r\n    classes = getDayClasses(date, this.props.dateProfile, this.context)\r\n    classes.unshift('fc-day-top')\r\n\r\n    if (this.renderProps.cellWeekNumbersVisible) {\r\n      weekCalcFirstDow = dateEnv.weekDow\r\n    }\r\n\r\n    html += '<td class=\"' + classes.join(' ') + '\"' +\r\n      (isDateValid ?\r\n        ' data-date=\"' + dateEnv.formatIso(date, { omitTime: true }) + '\"' :\r\n        ''\r\n        ) +\r\n      '>'\r\n\r\n    if (this.renderProps.cellWeekNumbersVisible && (date.getUTCDay() === weekCalcFirstDow)) {\r\n      html += buildGotoAnchorHtml(\r\n        view,\r\n        { date, type: 'week' },\r\n        { 'class': 'fc-week-number' },\r\n        dateEnv.format(date, WEEK_NUM_FORMAT) // inner HTML\r\n      )\r\n    }\r\n\r\n    if (isDayNumberVisible) {\r\n      html += buildGotoAnchorHtml(\r\n          view,\r\n          date,\r\n          { 'class': 'fc-day-number' },\r\n          '<span class=\"fc-day-number-weekday\">' + moment(date).format('dd') + '</span>' + dateEnv.format(date, DAY_NUM_FORMAT) // inner HTML\r\n      )\r\n    }\r\n\r\n    html += '</td>'\r\n\r\n    return html\r\n  }\r\n\r\n\r\n  /* Sizing\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  updateSize(isResize: boolean) {\r\n    let { fillRenderer, eventRenderer, mirrorRenderer } = this\r\n\r\n    if (\r\n      isResize ||\r\n      this.isCellSizesDirty ||\r\n      this.view.calendar.isEventsUpdated // hack\r\n    ) {\r\n      this.buildPositionCaches()\r\n      this.isCellSizesDirty = false\r\n    }\r\n\r\n    fillRenderer.computeSizes(isResize)\r\n    eventRenderer.computeSizes(isResize)\r\n    mirrorRenderer.computeSizes(isResize)\r\n\r\n    fillRenderer.assignSizes(isResize)\r\n    eventRenderer.assignSizes(isResize)\r\n    mirrorRenderer.assignSizes(isResize)\r\n  }\r\n\r\n\r\n  buildPositionCaches() {\r\n    this.buildColPositions()\r\n    this.buildRowPositions()\r\n  }\r\n\r\n\r\n  buildColPositions() {\r\n    this.colPositions.build()\r\n  }\r\n\r\n\r\n  buildRowPositions() {\r\n    this.rowPositions.build()\r\n    this.rowPositions.bottoms[this.rowCnt - 1] += this.bottomCoordPadding // hack\r\n  }\r\n\r\n\r\n  /* Hit System\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n  positionToHit(leftPosition, topPosition) {\r\n    let { colPositions, rowPositions } = this\r\n\r\n    let col = colPositions.leftToIndex(leftPosition)\r\n    let row = rowPositions.topToIndex(topPosition)\r\n\r\n    if (row != null && col != null && this.props.cells[row][col].date !== null) {\r\n      return {\r\n        row,\r\n        col,\r\n        dateSpan: {\r\n          range: this.getCellRange(row, col),\r\n          allDay: true\r\n        },\r\n        dayEl: this.getCellEl(row, col),\r\n        relativeRect: {\r\n          left: colPositions.lefts[col], // + (leftPosition - this.colPositions.lefts[0]),\r\n          right: colPositions.rights[col], // + (leftPosition - this.colPositions.lefts[0]),\r\n          top: rowPositions.tops[row],\r\n          bottom: rowPositions.bottoms[row]\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /* Cell System\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n  // FYI: the first column is the leftmost column, regardless of date\r\n\r\n\r\n  getCellEl(row, col) {\r\n    return this.cellEls[row * this.colCnt + col]\r\n  }\r\n\r\n\r\n  /* Event Drag Visualization\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  _renderEventDrag(state: EventSegUiInteractionState) {\r\n    if (state) {\r\n      this.eventRenderer.hideByHash(state.affectedInstances)\r\n      this.fillRenderer.renderSegs('highlight', state.segs)\r\n    }\r\n  }\r\n\r\n\r\n  _unrenderEventDrag(state: EventSegUiInteractionState) {\r\n    if (state) {\r\n      this.eventRenderer.showByHash(state.affectedInstances)\r\n      this.fillRenderer.unrender('highlight')\r\n    }\r\n  }\r\n\r\n\r\n  /* Event Resize Visualization\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  _renderEventResize(state: EventSegUiInteractionState) {\r\n    if (state) {\r\n      this.eventRenderer.hideByHash(state.affectedInstances)\r\n      this.fillRenderer.renderSegs('highlight', state.segs)\r\n      this.mirrorRenderer.renderSegs(state.segs, { isResizing: true, sourceSeg: state.sourceSeg })\r\n    }\r\n  }\r\n\r\n\r\n  _unrenderEventResize(state: EventSegUiInteractionState) {\r\n    if (state) {\r\n      this.eventRenderer.showByHash(state.affectedInstances)\r\n      this.fillRenderer.unrender('highlight')\r\n      this.mirrorRenderer.unrender(state.segs, { isResizing: true, sourceSeg: state.sourceSeg })\r\n    }\r\n  }\r\n\r\n\r\n  /* More+ Link Popover\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  removeSegPopover() {\r\n    if (this.segPopover) {\r\n      this.segPopover.hide() // in handler, will call segPopover's removeElement\r\n    }\r\n  }\r\n\r\n\r\n  // Limits the number of \"levels\" (vertically stacking layers of events) for each row of the grid.\r\n  // `levelLimit` can be false (don't limit), a number, or true (should be computed).\r\n  limitRows(levelLimit) {\r\n    let rowStructs = this.eventRenderer.rowStructs || []\r\n    let row // row #\r\n    let rowLevelLimit\r\n\r\n    for (row = 0; row < rowStructs.length; row++) {\r\n      this.unlimitRow(row)\r\n\r\n      if (!levelLimit) {\r\n        rowLevelLimit = false\r\n      } else if (typeof levelLimit === 'number') {\r\n        rowLevelLimit = levelLimit\r\n      } else {\r\n        rowLevelLimit = this.computeRowLevelLimit(row)\r\n      }\r\n\r\n      if (rowLevelLimit !== false) {\r\n        this.limitRow(row, rowLevelLimit)\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // Computes the number of levels a row will accomodate without going outside its bounds.\r\n  // Assumes the row is \"rigid\" (maintains a constant height regardless of what is inside).\r\n  // `row` is the row number.\r\n  computeRowLevelLimit(row): (number | false) {\r\n    let rowEl = this.rowEls[row] // the containing \"fake\" row div\r\n    let rowBottom = rowEl.getBoundingClientRect().bottom // relative to viewport!\r\n    let trEls = findChildren(this.eventRenderer.rowStructs[row].tbodyEl) as HTMLTableRowElement[]\r\n    let i\r\n    let trEl: HTMLTableRowElement\r\n\r\n    // Reveal one level <tr> at a time and stop when we find one out of bounds\r\n    for (i = 0; i < trEls.length; i++) {\r\n      trEl = trEls[i]\r\n      trEl.classList.remove('fc-limited') // reset to original state (reveal)\r\n\r\n      if (trEl.getBoundingClientRect().bottom > rowBottom) {\r\n        return i\r\n      }\r\n    }\r\n\r\n    return false // should not limit at all\r\n  }\r\n\r\n\r\n  // Limits the given grid row to the maximum number of levels and injects \"more\" links if necessary.\r\n  // `row` is the row number.\r\n  // `levelLimit` is a number for the maximum (inclusive) number of levels allowed.\r\n  limitRow(row, levelLimit) {\r\n    let { colCnt, isRtl } = this\r\n    let rowStruct = this.eventRenderer.rowStructs[row]\r\n    let moreNodes = [] // array of \"more\" <a> links and <td> DOM nodes\r\n    let col = 0 // col #, left-to-right (not chronologically)\r\n    let levelSegs // array of segment objects in the last allowable level, ordered left-to-right\r\n    let cellMatrix // a matrix (by level, then column) of all <td> elements in the row\r\n    let limitedNodes // array of temporarily hidden level <tr> and segment <td> DOM nodes\r\n    let i\r\n    let seg\r\n    let segsBelow // array of segment objects below `seg` in the current `col`\r\n    let totalSegsBelow // total number of segments below `seg` in any of the columns `seg` occupies\r\n    let colSegsBelow // array of segment arrays, below seg, one for each column (offset from segs's first column)\r\n    let td: HTMLTableCellElement\r\n    let rowSpan\r\n    let segMoreNodes // array of \"more\" <td> cells that will stand-in for the current seg's cell\r\n    let j\r\n    let moreTd: HTMLTableCellElement\r\n    let moreWrap\r\n    let moreLink\r\n\r\n    // Iterates through empty level cells and places \"more\" links inside if need be\r\n    let emptyCellsUntil = (endCol) => { // goes from current `col` to `endCol`\r\n      while (col < endCol) {\r\n        segsBelow = this.getCellSegs(row, col, levelLimit)\r\n        if (segsBelow.length) {\r\n          td = cellMatrix[levelLimit - 1][col]\r\n          moreLink = this.renderMoreLink(row, col, segsBelow)\r\n          moreWrap = createElement('div', null, moreLink)\r\n          td.appendChild(moreWrap)\r\n          moreNodes.push(moreWrap)\r\n        }\r\n        col++\r\n      }\r\n    }\r\n\r\n    if (levelLimit && levelLimit < rowStruct.segLevels.length) { // is it actually over the limit?\r\n      levelSegs = rowStruct.segLevels[levelLimit - 1]\r\n      cellMatrix = rowStruct.cellMatrix\r\n\r\n      limitedNodes = findChildren(rowStruct.tbodyEl).slice(levelLimit) // get level <tr> elements past the limit\r\n      limitedNodes.forEach(function(node) {\r\n        node.classList.add('fc-limited') // hide elements and get a simple DOM-nodes array\r\n      })\r\n\r\n      // iterate though segments in the last allowable level\r\n      for (i = 0; i < levelSegs.length; i++) {\r\n        seg = levelSegs[i]\r\n        let leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol\r\n        let rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol\r\n\r\n        emptyCellsUntil(leftCol) // process empty cells before the segment\r\n\r\n        // determine *all* segments below `seg` that occupy the same columns\r\n        colSegsBelow = []\r\n        totalSegsBelow = 0\r\n        while (col <= rightCol) {\r\n          segsBelow = this.getCellSegs(row, col, levelLimit)\r\n          colSegsBelow.push(segsBelow)\r\n          totalSegsBelow += segsBelow.length\r\n          col++\r\n        }\r\n\r\n        if (totalSegsBelow) { // do we need to replace this segment with one or many \"more\" links?\r\n          td = cellMatrix[levelLimit - 1][leftCol] // the segment's parent cell\r\n          rowSpan = td.rowSpan || 1\r\n          segMoreNodes = []\r\n\r\n          // make a replacement <td> for each column the segment occupies. will be one for each colspan\r\n          for (j = 0; j < colSegsBelow.length; j++) {\r\n            moreTd = createElement('td', { className: 'fc-more-cell', rowSpan }) as HTMLTableCellElement\r\n            segsBelow = colSegsBelow[j]\r\n            moreLink = this.renderMoreLink(\r\n              row,\r\n              leftCol + j,\r\n              [ seg ].concat(segsBelow) // count seg as hidden too\r\n            )\r\n            moreWrap = createElement('div', null, moreLink)\r\n            moreTd.appendChild(moreWrap)\r\n            segMoreNodes.push(moreTd)\r\n            moreNodes.push(moreTd)\r\n          }\r\n\r\n          td.classList.add('fc-limited')\r\n          insertAfterElement(td, segMoreNodes)\r\n\r\n          limitedNodes.push(td)\r\n        }\r\n      }\r\n\r\n      emptyCellsUntil(this.colCnt) // finish off the level\r\n      rowStruct.moreEls = moreNodes // for easy undoing later\r\n      rowStruct.limitedEls = limitedNodes // for easy undoing later\r\n    }\r\n  }\r\n\r\n\r\n  // Reveals all levels and removes all \"more\"-related elements for a grid's row.\r\n  // `row` is a row number.\r\n  unlimitRow(row) {\r\n    let rowStruct = this.eventRenderer.rowStructs[row]\r\n\r\n    if (rowStruct.moreEls) {\r\n      rowStruct.moreEls.forEach(removeElement)\r\n      rowStruct.moreEls = null\r\n    }\r\n\r\n    if (rowStruct.limitedEls) {\r\n      rowStruct.limitedEls.forEach(function(limitedEl) {\r\n        limitedEl.classList.remove('fc-limited')\r\n      })\r\n      rowStruct.limitedEls = null\r\n    }\r\n  }\r\n\r\n\r\n  // Renders an <a> element that represents hidden event element for a cell.\r\n  // Responsible for attaching click handler as well.\r\n  renderMoreLink(row, col, hiddenSegs) {\r\n    let { view, dateEnv } = this\r\n\r\n    let a = createElement('a', { className: 'fc-more' })\r\n    a.innerText = this.getMoreLinkText(hiddenSegs.length)\r\n    a.addEventListener('click', (ev) => {\r\n      let clickOption = this.opt('eventLimitClick')\r\n      let _col = this.isRtl ? this.colCnt - col - 1 : col // HACK: props.cells has different dir system?\r\n      let date = this.props.cells[row][_col].date\r\n      let moreEl = ev.currentTarget as HTMLElement\r\n      let dayEl = this.getCellEl(row, col)\r\n      let allSegs = this.getCellSegs(row, col)\r\n\r\n      // rescope the segments to be within the cell's date\r\n      let reslicedAllSegs = this.resliceDaySegs(allSegs, date)\r\n      let reslicedHiddenSegs = this.resliceDaySegs(hiddenSegs, date)\r\n\r\n      if (typeof clickOption === 'function') {\r\n        // the returned value can be an atomic option\r\n        clickOption = this.publiclyTrigger('eventLimitClick', [\r\n          {\r\n            date: dateEnv.toDate(date),\r\n            allDay: true,\r\n            dayEl: dayEl,\r\n            moreEl: moreEl,\r\n            segs: reslicedAllSegs,\r\n            hiddenSegs: reslicedHiddenSegs,\r\n            jsEvent: ev,\r\n            view\r\n          }\r\n        ])\r\n      }\r\n\r\n      if (clickOption === 'popover') {\r\n        this.showSegPopover(row, col, moreEl, reslicedAllSegs)\r\n      } else if (typeof clickOption === 'string') { // a view name\r\n        view.calendar.zoomTo(date, clickOption)\r\n      }\r\n    })\r\n\r\n    return a\r\n  }\r\n\r\n\r\n  // Reveals the popover that displays all events within a cell\r\n  showSegPopover(row, col, moreLink: HTMLElement, segs) {\r\n    let { calendar, view, theme } = this\r\n    let _col = this.isRtl ? this.colCnt - col - 1 : col // HACK: props.cells has different dir system?\r\n    let moreWrap = moreLink.parentNode as HTMLElement // the <div> wrapper around the <a>\r\n    let topEl: HTMLElement // the element we want to match the top coordinate of\r\n    let options\r\n\r\n    if (this.rowCnt === 1) {\r\n      topEl = view.el // will cause the popover to cover any sort of header\r\n    } else {\r\n      topEl = this.rowEls[row] // will align with top of row\r\n    }\r\n\r\n    options = {\r\n      className: 'fc-more-popover ' + theme.getClass('popover'),\r\n      parentEl: view.el, // will be outside of all scrollers within the view\r\n      top: computeRect(topEl).top,\r\n      autoHide: true, // when the user clicks elsewhere, hide the popover\r\n      content: (el) => {\r\n        this.segPopoverTile = new DayTile(\r\n          this.context,\r\n          el\r\n        )\r\n        this.updateSegPopoverTile(\r\n          this.props.cells[row][_col].date,\r\n          segs\r\n        )\r\n      },\r\n      hide: () => {\r\n        this.segPopoverTile.destroy()\r\n        this.segPopoverTile = null\r\n        this.segPopover.destroy()\r\n        this.segPopover = null\r\n      }\r\n    }\r\n\r\n    // Determine horizontal coordinate.\r\n    // We use the moreWrap instead of the <td> to avoid border confusion.\r\n    if (this.isRtl) {\r\n      options.right = computeRect(moreWrap).right + 1 // +1 to be over cell border\r\n    } else {\r\n      options.left = computeRect(moreWrap).left - 1 // -1 to be over cell border\r\n    }\r\n\r\n    this.segPopover = new Popover(options)\r\n    this.segPopover.show()\r\n    calendar.releaseAfterSizingTriggers() // hack for eventPositioned\r\n  }\r\n\r\n\r\n  // Given the events within an array of segment objects, reslice them to be in a single day\r\n  resliceDaySegs(segs, dayDate) {\r\n    let dayStart = dayDate\r\n    let dayEnd = addDays(dayStart, 1)\r\n    let dayRange = { start: dayStart, end: dayEnd }\r\n    let newSegs = []\r\n\r\n    for (let seg of segs) {\r\n      let eventRange = seg.eventRange\r\n      let origRange = eventRange.range\r\n      let slicedRange = intersectRanges(origRange, dayRange)\r\n\r\n      if (slicedRange) {\r\n        newSegs.push({\r\n          ...seg,\r\n          eventRange: {\r\n            def: eventRange.def,\r\n            ui: { ...eventRange.ui, durationEditable: false }, // hack to disable resizing\r\n            instance: eventRange.instance,\r\n            range: slicedRange\r\n          } as EventRenderRange,\r\n          isStart: seg.isStart && slicedRange.start.valueOf() === origRange.start.valueOf(),\r\n          isEnd: seg.isEnd && slicedRange.end.valueOf() === origRange.end.valueOf()\r\n        })\r\n      }\r\n    }\r\n\r\n    return newSegs\r\n  }\r\n\r\n\r\n  // Generates the text that should be inside a \"more\" link, given the number of events it represents\r\n  getMoreLinkText(num) {\r\n    let opt = this.opt('eventLimitText')\r\n\r\n    if (typeof opt === 'function') {\r\n      return opt(num)\r\n    } else {\r\n      return '+' + num + ' ' + opt\r\n    }\r\n  }\r\n\r\n\r\n  // Returns segments within a given cell.\r\n  // If `startLevel` is specified, returns only events including and below that level. Otherwise returns all segs.\r\n  getCellSegs(row, col, startLevel?) {\r\n    let segMatrix = this.eventRenderer.rowStructs[row].segMatrix\r\n    let level = startLevel || 0\r\n    let segs = []\r\n    let seg\r\n\r\n    while (level < segMatrix.length) {\r\n      seg = segMatrix[level][col]\r\n      if (seg) {\r\n        segs.push(seg)\r\n      }\r\n      level++\r\n    }\r\n\r\n    return segs\r\n  }\r\n\r\n}\r\n","import {\r\n  DateProfileGenerator,\r\n  DateRange\r\n} from '@fullcalendar/core'\r\n\r\nexport default class DayGridDateProfileGenerator extends DateProfileGenerator {\r\n\r\n  // Computes the date range that will be rendered.\r\n  buildRenderRange(currentRange, currentRangeUnit, isRangeAllDay): DateRange {\r\n    let renderRange = super.buildRenderRange(currentRange, currentRangeUnit, isRangeAllDay)\r\n    let start = renderRange.start\r\n    let end = renderRange.end\r\n\r\n    return { start, end }\r\n  }\r\n\r\n}\r\n","import {\r\n  createElement,\r\n  removeElement,\r\n  appendToElement,\r\n  prependToElement,\r\n  Seg\r\n} from '@fullcalendar/core'\r\nimport DayGrid from './DayGrid'\r\nimport SimpleDayGridEventRenderer from './SimpleDayGridEventRenderer'\r\n\r\n\r\n/* Event-rendering methods for the DayGrid class\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nexport default class DayGridEventRenderer extends SimpleDayGridEventRenderer {\r\n\r\n  dayGrid: DayGrid\r\n  rowStructs: any // an array of objects, each holding information about a row's foreground event-rendering\r\n\r\n\r\n  constructor(dayGrid: DayGrid) {\r\n    super(dayGrid.context)\r\n\r\n    this.dayGrid = dayGrid\r\n  }\r\n\r\n\r\n  // Renders the given foreground event segments onto the grid\r\n  attachSegs(segs: Seg[], mirrorInfo) {\r\n    let rowStructs = this.rowStructs = this.renderSegRows(segs)\r\n\r\n    // append to each row's content skeleton\r\n    this.dayGrid.rowEls.forEach(function(rowNode, i) {\r\n      rowNode.querySelector('.fc-content-skeleton > table').appendChild(\r\n        rowStructs[i].tbodyEl\r\n      )\r\n    })\r\n\r\n    // removes the \"more..\" events popover\r\n    if (!mirrorInfo) {\r\n      this.dayGrid.removeSegPopover()\r\n    }\r\n  }\r\n\r\n\r\n  // Unrenders all currently rendered foreground event segments\r\n  detachSegs() {\r\n    let rowStructs = this.rowStructs || []\r\n    let rowStruct\r\n\r\n    while ((rowStruct = rowStructs.pop())) {\r\n      removeElement(rowStruct.tbodyEl)\r\n    }\r\n\r\n    this.rowStructs = null\r\n  }\r\n\r\n\r\n  // Uses the given events array to generate <tbody> elements that should be appended to each row's content skeleton.\r\n  // Returns an array of rowStruct objects (see the bottom of `renderSegRow`).\r\n  // PRECONDITION: each segment shoud already have a rendered and assigned `.el`\r\n  renderSegRows(segs: Seg[]) {\r\n    let rowStructs = []\r\n    let segRows\r\n    let row\r\n\r\n    segRows = this.groupSegRows(segs) // group into nested arrays\r\n\r\n    // iterate each row of segment groupings\r\n    for (row = 0; row < segRows.length; row++) {\r\n      rowStructs.push(\r\n        this.renderSegRow(row, segRows[row])\r\n      )\r\n    }\r\n\r\n    return rowStructs\r\n  }\r\n\r\n\r\n  // Given a row # and an array of segments all in the same row, render a <tbody> element, a skeleton that contains\r\n  // the segments. Returns object with a bunch of internal data about how the render was calculated.\r\n  // NOTE: modifies rowSegs\r\n  renderSegRow(row, rowSegs) {\r\n    let { dayGrid } = this\r\n    let { colCnt, isRtl } = dayGrid\r\n    let segLevels = this.buildSegLevels(rowSegs) // group into sub-arrays of levels\r\n    let levelCnt = Math.max(1, segLevels.length) // ensure at least one level\r\n    let tbody = document.createElement('tbody')\r\n    let segMatrix = [] // lookup for which segments are rendered into which level+col cells\r\n    let cellMatrix = [] // lookup for all <td> elements of the level+col matrix\r\n    let loneCellMatrix = [] // lookup for <td> elements that only take up a single column\r\n    let i\r\n    let levelSegs\r\n    let col\r\n    let tr: HTMLTableRowElement\r\n    let j\r\n    let seg\r\n    let td: HTMLTableCellElement\r\n\r\n    // populates empty cells from the current column (`col`) to `endCol`\r\n    function emptyCellsUntil(endCol) {\r\n      while (col < endCol) {\r\n        // try to grab a cell from the level above and extend its rowspan. otherwise, create a fresh cell\r\n        td = (loneCellMatrix[i - 1] || [])[col]\r\n        if (td) {\r\n          td.rowSpan = (td.rowSpan || 1) + 1\r\n        } else {\r\n          td = document.createElement('td')\r\n          tr.appendChild(td)\r\n        }\r\n        cellMatrix[i][col] = td\r\n        loneCellMatrix[i][col] = td\r\n        col++\r\n      }\r\n    }\r\n\r\n    for (i = 0; i < levelCnt; i++) { // iterate through all levels\r\n      levelSegs = segLevels[i]\r\n      col = 0\r\n      tr = document.createElement('tr')\r\n\r\n      segMatrix.push([])\r\n      cellMatrix.push([])\r\n      loneCellMatrix.push([])\r\n\r\n      // levelCnt might be 1 even though there are no actual levels. protect against this.\r\n      // this single empty row is useful for styling.\r\n      if (levelSegs) {\r\n        for (j = 0; j < levelSegs.length; j++) { // iterate through segments in level\r\n          seg = levelSegs[j]\r\n          let leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol\r\n          let rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol\r\n\r\n          emptyCellsUntil(leftCol)\r\n\r\n          // create a container that occupies or more columns. append the event element.\r\n          td = createElement('td', { className: 'fc-event-container' }, seg.el) as HTMLTableCellElement\r\n          if (leftCol !== rightCol) {\r\n            td.colSpan = rightCol - leftCol //+ 1 Hiedra\r\n          } else { // a single-column segment\r\n            loneCellMatrix[i][col] = td\r\n          }\r\n\r\n          while (col <= rightCol) {\r\n            cellMatrix[i][col] = td\r\n            segMatrix[i][col] = seg\r\n            col++\r\n          }\r\n\r\n          tr.appendChild(td)\r\n        }\r\n      }\r\n\r\n      emptyCellsUntil(colCnt) // finish off the row\r\n\r\n      let introHtml = dayGrid.renderProps.renderIntroHtml()\r\n      if (introHtml) {\r\n        if (dayGrid.isRtl) {\r\n          appendToElement(tr, introHtml)\r\n        } else {\r\n          prependToElement(tr, introHtml)\r\n        }\r\n      }\r\n\r\n      tbody.appendChild(tr)\r\n    }\r\n\r\n    return { // a \"rowStruct\"\r\n      row: row, // the row number\r\n      tbodyEl: tbody,\r\n      cellMatrix: cellMatrix,\r\n      segMatrix: segMatrix,\r\n      segLevels: segLevels,\r\n      segs: rowSegs\r\n    }\r\n  }\r\n\r\n\r\n  // Stacks a flat array of segments, which are all assumed to be in the same row, into subarrays of vertical levels.\r\n  // NOTE: modifies segs\r\n  buildSegLevels(segs: Seg[]) {\r\n    let { isRtl, colCnt } = this.dayGrid\r\n    let levels = []\r\n    let i\r\n    let seg\r\n    let j\r\n\r\n    // Give preference to elements with certain criteria, so they have\r\n    // a chance to be closer to the top.\r\n    segs = this.sortEventSegs(segs)\r\n\r\n    for (i = 0; i < segs.length; i++) {\r\n      seg = segs[i]\r\n\r\n      // loop through levels, starting with the topmost, until the segment doesn't collide with other segments\r\n      for (j = 0; j < levels.length; j++) {\r\n        if (!isDaySegCollision(seg, levels[j])) {\r\n          break\r\n        }\r\n      }\r\n\r\n      // `j` now holds the desired subrow index\r\n      seg.level = j\r\n      seg.leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol // for sorting only\r\n      seg.rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol // for sorting only\r\n\r\n      // create new level array if needed and append segment\r\n      ;(levels[j] || (levels[j] = [])).push(seg)\r\n    }\r\n\r\n    // order segments left-to-right. very important if calendar is RTL\r\n    for (j = 0; j < levels.length; j++) {\r\n      levels[j].sort(compareDaySegCols)\r\n    }\r\n\r\n    return levels\r\n  }\r\n\r\n\r\n  // Given a flat array of segments, return an array of sub-arrays, grouped by each segment's row\r\n  groupSegRows(segs: Seg[]) {\r\n    let segRows = []\r\n    let i\r\n\r\n    for (i = 0; i < this.dayGrid.rowCnt; i++) {\r\n      segRows.push([])\r\n    }\r\n\r\n    for (i = 0; i < segs.length; i++) {\r\n      segRows[segs[i].row].push(segs[i])\r\n    }\r\n\r\n    return segRows\r\n  }\r\n\r\n\r\n  // Computes a default `displayEventEnd` value if one is not expliclty defined\r\n  computeDisplayEventEnd() {\r\n    return this.dayGrid.colCnt === 1 // we'll likely have space if there's only one day\r\n  }\r\n\r\n}\r\n\r\n\r\n// Computes whether two segments' columns collide. They are assumed to be in the same row.\r\nfunction isDaySegCollision(seg: Seg, otherSegs: Seg) {\r\n  let i\r\n  let otherSeg\r\n\r\n  for (i = 0; i < otherSegs.length; i++) {\r\n    otherSeg = otherSegs[i]\r\n\r\n    if (\r\n      otherSeg.firstCol <= seg.lastCol &&\r\n      otherSeg.lastCol >= seg.firstCol\r\n    ) {\r\n      return true\r\n    }\r\n  }\r\n\r\n  return false\r\n}\r\n\r\n\r\n// A cmp function for determining the leftmost event\r\nfunction compareDaySegCols(a: Seg, b: Seg) {\r\n  return a.leftCol - b.leftCol\r\n}\r\n","import {\r\n  htmlToElement,\r\n  appendToElement,\r\n  prependToElement,\r\n  FillRenderer,\r\n  Seg\r\n} from '@fullcalendar/core'\r\nimport DayGrid, { DayGridSeg } from './DayGrid'\r\n\r\n\r\nconst EMPTY_CELL_HTML = '<td style=\"pointer-events:none\"></td>'\r\n\r\n\r\nexport default class DayGridFillRenderer extends FillRenderer {\r\n\r\n  fillSegTag: string = 'td' // override the default tag name\r\n  dayGrid: DayGrid\r\n\r\n  constructor(dayGrid: DayGrid) {\r\n    super(dayGrid.context)\r\n\r\n    this.dayGrid = dayGrid\r\n  }\r\n\r\n  renderSegs(type: string, segs: DayGridSeg[]) {\r\n\r\n    // don't render timed background events\r\n    if (type === 'bgEvent') {\r\n      segs = segs.filter(function(seg) {\r\n        return seg.eventRange.def.allDay\r\n      })\r\n    }\r\n\r\n    super.renderSegs(type, segs)\r\n  }\r\n\r\n  attachSegs(type, segs: Seg[]) {\r\n    let els = []\r\n    let i\r\n    let seg\r\n    let skeletonEl: HTMLElement\r\n\r\n    for (i = 0; i < segs.length; i++) {\r\n      seg = segs[i]\r\n      skeletonEl = this.renderFillRow(type, seg)\r\n      this.dayGrid.rowEls[seg.row].appendChild(skeletonEl)\r\n      els.push(skeletonEl)\r\n    }\r\n\r\n    return els\r\n  }\r\n\r\n  // Generates the HTML needed for one row of a fill. Requires the seg's el to be rendered.\r\n  renderFillRow(type, seg: Seg): HTMLElement {\r\n    let { dayGrid } = this\r\n    let { colCnt, isRtl } = dayGrid\r\n    let leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol\r\n    let rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol\r\n    let startCol = leftCol\r\n    let endCol = rightCol // + 1 Hiedra\r\n    let className\r\n    let skeletonEl: HTMLElement\r\n    let trEl: HTMLTableRowElement\r\n\r\n    if (type === 'businessHours') {\r\n      className = 'bgevent'\r\n    } else {\r\n      className = type.toLowerCase()\r\n    }\r\n\r\n    skeletonEl = htmlToElement(\r\n      '<div class=\"fc-' + className + '-skeleton\">' +\r\n        '<table><tr></tr></table>' +\r\n      '</div>'\r\n    )\r\n    trEl = skeletonEl.getElementsByTagName('tr')[0]\r\n\r\n    if (startCol > 0) {\r\n      appendToElement(trEl,\r\n        // will create (startCol + 1) td's\r\n        new Array(startCol + 1).join(EMPTY_CELL_HTML)\r\n      )\r\n    }\r\n\r\n    if( endCol != startCol ) //hiedra\r\n      (seg.el as HTMLTableCellElement).colSpan = endCol - startCol;\r\n    trEl.appendChild(seg.el)\r\n\r\n    if (endCol < colCnt) {\r\n      appendToElement(trEl,\r\n        // will create (colCnt - endCol) td's\r\n        new Array(colCnt - endCol + 1).join(EMPTY_CELL_HTML)\r\n      )\r\n    }\r\n\r\n    let introHtml = dayGrid.renderProps.renderIntroHtml()\r\n    if (introHtml) {\r\n      if (dayGrid.isRtl) {\r\n        appendToElement(trEl, introHtml)\r\n      } else {\r\n        prependToElement(trEl, introHtml)\r\n      }\r\n    }\r\n\r\n    return skeletonEl\r\n  }\r\n\r\n}\r\n","import {\r\n  htmlToElement, Seg\r\n} from '@fullcalendar/core'\r\nimport DayGridEventRenderer from './DayGridEventRenderer'\r\n\r\n\r\nexport default class DayGridMirrorRenderer extends DayGridEventRenderer {\r\n\r\n  attachSegs(segs: Seg[], mirrorInfo) {\r\n    let { sourceSeg } = mirrorInfo\r\n    let rowStructs = this.rowStructs = this.renderSegRows(segs)\r\n\r\n    // inject each new event skeleton into each associated row\r\n    this.dayGrid.rowEls.forEach(function(rowNode, row) {\r\n      let skeletonEl = htmlToElement('<div class=\"fc-mirror-skeleton\"><table></table></div>') // will be absolutely positioned\r\n      let skeletonTopEl: HTMLElement\r\n      let skeletonTop\r\n\r\n      // If there is an original segment, match the top position. Otherwise, put it at the row's top level\r\n      if (sourceSeg && sourceSeg.row === row) {\r\n        skeletonTopEl = sourceSeg.el\r\n      } else {\r\n        skeletonTopEl = rowNode.querySelector('.fc-content-skeleton tbody')\r\n\r\n        if (!skeletonTopEl) { // when no events\r\n          skeletonTopEl = rowNode.querySelector('.fc-content-skeleton table')\r\n        }\r\n      }\r\n\r\n      skeletonTop = skeletonTopEl.getBoundingClientRect().top -\r\n        rowNode.getBoundingClientRect().top // the offsetParent origin\r\n\r\n      skeletonEl.style.top = skeletonTop + 'px'\r\n      skeletonEl.querySelector('table').appendChild(rowStructs[row].tbodyEl)\r\n\r\n      rowNode.appendChild(skeletonEl)\r\n    })\r\n  }\r\n\r\n}\r\n","import {\r\n  DayHeader,\r\n  ComponentContext,\r\n  ViewSpec,\r\n  DateProfileGenerator,\r\n  DateProfile,\r\n  ViewProps,\r\n  memoize,\r\n  DaySeries\r\n} from '@fullcalendar/core'\r\nimport AbstractDayGridView from './AbstractDayGridView'\r\nimport SimpleDayGrid from './SimpleDayGrid'\r\nimport DayTable from \"./DayTable\";\r\nimport {locale as momentsetlocale} from 'moment'; //Hiedra\r\n\r\nexport default class DayGridView extends AbstractDayGridView {\r\n\r\n  header: DayHeader\r\n  simpleDayGrid: SimpleDayGrid\r\n  dayTable: DayTable\r\n\r\n  private buildDayTable = memoize(buildDayTable)\r\n\r\n  constructor(_context: ComponentContext, viewSpec: ViewSpec, dateProfileGenerator: DateProfileGenerator, parentEl: HTMLElement) {\r\n    super(_context, viewSpec, dateProfileGenerator, parentEl)\r\n    //set moment locale\r\n    momentsetlocale(this.context.dateEnv.locale.codeArg.toString()) //Hiedra\r\n\r\n    if (this.opt('columnHeader')) {\r\n      this.header = new DayHeader(\r\n        this.context,\r\n        this.el.querySelector('.fc-head-container')\r\n      )\r\n    }\r\n\r\n    this.simpleDayGrid = new SimpleDayGrid(this.context, this.dayGrid)\r\n  }\r\n\r\n  destroy() {\r\n    super.destroy()\r\n\r\n    if (this.header) {\r\n      this.header.destroy()\r\n    }\r\n\r\n    this.simpleDayGrid.destroy()\r\n  }\r\n\r\n  render(props: ViewProps) {\r\n    super.render(props)\r\n\r\n    let { dateProfile } = this.props\r\n\r\n    let dayTable = this.dayTable =\r\n      this.buildDayTable(dateProfile, this.dateProfileGenerator)\r\n\r\n    if (this.header) {\r\n      this.header.receiveProps({\r\n        dateProfile,\r\n        dates: dayTable.headerDates,\r\n        datesRepDistinctDays: dayTable.rowCnt === 1,\r\n        renderIntroHtml: this.renderHeadIntroHtml\r\n      })\r\n    }\r\n\r\n    this.simpleDayGrid.receiveProps({\r\n      dateProfile,\r\n      dayTable,\r\n      businessHours: props.businessHours,\r\n      dateSelection: props.dateSelection,\r\n      eventStore: props.eventStore,\r\n      eventUiBases: props.eventUiBases,\r\n      eventSelection: props.eventSelection,\r\n      eventDrag: props.eventDrag,\r\n      eventResize: props.eventResize,\r\n      isRigid: this.hasRigidRows(),\r\n      nextDayThreshold: this.nextDayThreshold\r\n    })\r\n  }\r\n\r\n}\r\n\r\nexport function buildDayTable(dateProfile: DateProfile, dateProfileGenerator: DateProfileGenerator) {\r\n  let daySeries = new DaySeries(dateProfile.renderRange, dateProfileGenerator)\r\n\r\n  return new DayTable(\r\n    daySeries,\r\n    /year|month|week/.test(dateProfile.currentRangeUnit)\r\n  )\r\n}\r\n","import { Seg, DaySeries, DateRange, DateMarker } from '@fullcalendar/core'\r\nimport moment from 'moment'\r\n\r\nexport interface DayTableSeg extends Seg {\r\n    row: number\r\n    firstCol: number\r\n    lastCol: number\r\n}\r\n\r\nexport interface DayTableCell {\r\n    date: DateMarker\r\n    htmlAttrs?: string\r\n}\r\n\r\nexport default class DayTable {\r\n\r\n    rowCnt: number\r\n    colCnt: number\r\n    cells: DayTableCell[][]\r\n    headerDates: DateMarker[]\r\n\r\n    private daySeries: DaySeries\r\n\r\n    constructor(daySeries: DaySeries, breakOnWeeks: boolean) {\r\n        this.daySeries = daySeries\r\n        this.cells = this.buildCells()\r\n        this.headerDates = this.buildHeaderDates()\r\n        this.rowCnt = 12\r\n    }\r\n\r\n    private buildCells() {\r\n        let rows = []\r\n        let cells = []\r\n\r\n        for (let i = 0; i < this.daySeries.dates.length; i++) {\r\n            cells.push(\r\n                { date: this.daySeries.dates[i] }\r\n            )\r\n            if (this.daySeries.dates.length === (i + 1) || this.daySeries.dates[i + 1].getDate() === 1) {\r\n                for (let padding = this.daySeries.dates[i].getDate(); padding < 31; padding++) {\r\n                    cells.push({\r\n                        date: null\r\n                    })\r\n                }\r\n                rows.push(cells)\r\n                cells = []\r\n            }\r\n        }\r\n        return rows\r\n    }\r\n\r\n    private buildHeaderDates() {\r\n        return []\r\n    }\r\n\r\n    sliceRange(range: DateRange): DayTableSeg[] {\r\n        let segs: DayTableSeg[] = []\r\n\r\n        let firstMonthStart = moment(range.start).startOf('month')\r\n\r\n        let currentMonthStart = moment(range.start).startOf('month')\r\n        let currentMonthEnd = moment(range.start).endOf('month')\r\n\r\n        let lastMonthStart = moment(range.end).startOf('month')\r\n        if (lastMonthStart.year() > currentMonthStart.year()) {\r\n            lastMonthStart = currentMonthStart.clone().month(11).startOf('month')\r\n        }\r\n\r\n        while (currentMonthStart.isSameOrBefore(lastMonthStart)) {\r\n            segs.push({\r\n                row: currentMonthStart.month(),\r\n                firstCol: (currentMonthStart.isAfter(range.start)) ? 0 : range.start.getDate() - 1,\r\n                lastCol: (currentMonthEnd.isBefore(range.end)) ? currentMonthEnd.date() - 1 : range.end.getDate() - 1,\r\n                isStart: currentMonthStart.isSame(firstMonthStart),\r\n                isEnd: currentMonthStart.isSame(lastMonthStart)\r\n            })\r\n\r\n            currentMonthStart.add(1, 'months')\r\n            currentMonthEnd = currentMonthStart.clone().endOf('month')\r\n        }\r\n\r\n        return segs\r\n    }\r\n\r\n}\r\n","import {\r\n  DateComponent, Seg,\r\n  htmlEscape,\r\n  createFormatter,\r\n  Hit,\r\n  addDays, DateMarker,\r\n  removeElement,\r\n  ComponentContext,\r\n  EventInstanceHash,\r\n  memoizeRendering, MemoizedRendering\r\n} from '@fullcalendar/core'\r\nimport SimpleDayGridEventRenderer from './SimpleDayGridEventRenderer'\r\n\r\nexport interface DayTileProps {\r\n  date: DateMarker\r\n  fgSegs: Seg[]\r\n  eventSelection: string\r\n  eventDragInstances: EventInstanceHash\r\n  eventResizeInstances: EventInstanceHash\r\n}\r\n\r\nexport default class DayTile extends DateComponent<DayTileProps> {\r\n\r\n  segContainerEl: HTMLElement\r\n\r\n  private renderFrame: MemoizedRendering<[DateMarker]>\r\n  private renderFgEvents: MemoizedRendering<[Seg[]]>\r\n  private renderEventSelection: MemoizedRendering<[string]>\r\n  private renderEventDrag: MemoizedRendering<[EventInstanceHash]>\r\n  private renderEventResize: MemoizedRendering<[EventInstanceHash]>\r\n\r\n  constructor(context: ComponentContext, el: HTMLElement) {\r\n    super(context, el)\r\n\r\n    let eventRenderer = this.eventRenderer = new DayTileEventRenderer(this)\r\n\r\n    let renderFrame = this.renderFrame = memoizeRendering(\r\n      this._renderFrame\r\n    )\r\n\r\n    this.renderFgEvents = memoizeRendering(\r\n      eventRenderer.renderSegs.bind(eventRenderer),\r\n      eventRenderer.unrender.bind(eventRenderer),\r\n      [ renderFrame ]\r\n    )\r\n\r\n    this.renderEventSelection = memoizeRendering(\r\n      eventRenderer.selectByInstanceId.bind(eventRenderer),\r\n      eventRenderer.unselectByInstanceId.bind(eventRenderer),\r\n      [ this.renderFgEvents ]\r\n    )\r\n\r\n    this.renderEventDrag = memoizeRendering(\r\n      eventRenderer.hideByHash.bind(eventRenderer),\r\n      eventRenderer.showByHash.bind(eventRenderer),\r\n      [ renderFrame ]\r\n    )\r\n\r\n    this.renderEventResize = memoizeRendering(\r\n      eventRenderer.hideByHash.bind(eventRenderer),\r\n      eventRenderer.showByHash.bind(eventRenderer),\r\n      [ renderFrame ]\r\n    )\r\n\r\n    context.calendar.registerInteractiveComponent(this, {\r\n      el: this.el,\r\n      useEventCenter: false\r\n    })\r\n  }\r\n\r\n  render(props: DayTileProps) {\r\n    this.renderFrame(props.date)\r\n    this.renderFgEvents(props.fgSegs)\r\n    this.renderEventSelection(props.eventSelection)\r\n    this.renderEventDrag(props.eventDragInstances)\r\n    this.renderEventResize(props.eventResizeInstances)\r\n  }\r\n\r\n  destroy() {\r\n    super.destroy()\r\n\r\n    this.renderFrame.unrender() // should unrender everything else\r\n\r\n    this.calendar.unregisterInteractiveComponent(this)\r\n  }\r\n\r\n  _renderFrame(date: DateMarker) {\r\n    let { theme, dateEnv } = this\r\n\r\n    let title = dateEnv.format(\r\n      date,\r\n      createFormatter(this.opt('dayPopoverFormat')) // TODO: cache\r\n    )\r\n\r\n    this.el.innerHTML =\r\n      '<div class=\"fc-header ' + theme.getClass('popoverHeader') + '\">' +\r\n        '<span class=\"fc-title\">' +\r\n          htmlEscape(title) +\r\n        '</span>' +\r\n        '<span class=\"fc-close ' + theme.getIconClass('close') + '\"></span>' +\r\n      '</div>' +\r\n      '<div class=\"fc-body ' + theme.getClass('popoverContent') + '\">' +\r\n        '<div class=\"fc-event-container\"></div>' +\r\n      '</div>'\r\n\r\n    this.segContainerEl = this.el.querySelector('.fc-event-container')\r\n  }\r\n\r\n  queryHit(positionLeft: number, positionTop: number, elWidth: number, elHeight: number): Hit | null {\r\n    let date = (this.props as any).date // HACK\r\n\r\n    if (positionLeft < elWidth && positionTop < elHeight) {\r\n      return {\r\n        component: this,\r\n        dateSpan: {\r\n          allDay: true,\r\n          range: { start: date, end: addDays(date, 1) }\r\n        },\r\n        dayEl: this.el,\r\n        rect: {\r\n          left: 0,\r\n          top: 0,\r\n          right: elWidth,\r\n          bottom: elHeight\r\n        },\r\n        layer: 1\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\nexport class DayTileEventRenderer extends SimpleDayGridEventRenderer {\r\n\r\n  dayTile: DayTile\r\n\r\n  constructor(dayTile) {\r\n    super(dayTile.context)\r\n\r\n    this.dayTile = dayTile\r\n  }\r\n\r\n  attachSegs(segs: Seg[]) {\r\n    for (let seg of segs) {\r\n      this.dayTile.segContainerEl.appendChild(seg.el)\r\n    }\r\n  }\r\n\r\n  detachSegs(segs: Seg[]) {\r\n    for (let seg of segs) {\r\n      removeElement(seg.el)\r\n    }\r\n  }\r\n\r\n}\r\n","\r\n/* A rectangular panel that is absolutely positioned over other content\r\n------------------------------------------------------------------------------------------------------------------------\r\nOptions:\r\n  - className (string)\r\n  - content (HTML string, element, or element array)\r\n  - parentEl\r\n  - top\r\n  - left\r\n  - right (the x coord of where the right edge should be. not a \"CSS\" right)\r\n  - autoHide (boolean)\r\n  - show (callback)\r\n  - hide (callback)\r\n*/\r\n\r\nimport {\r\n  removeElement, createElement, applyStyle,\r\n  listenBySelector,\r\n  computeClippingRect, computeRect\r\n} from '@fullcalendar/core'\r\n\r\nexport interface PopoverOptions {\r\n  className?: string\r\n  content?: (el: HTMLElement) => void\r\n  parentEl: HTMLElement\r\n  autoHide?: boolean\r\n  top?: number\r\n  left?: number\r\n  right?: number\r\n  viewportConstrain?: boolean\r\n}\r\n\r\nexport default class Popover {\r\n\r\n  isHidden: boolean = true\r\n  options: PopoverOptions\r\n  el: HTMLElement // the container element for the popover. generated by this object\r\n  margin: number = 10 // the space required between the popover and the edges of the scroll container\r\n\r\n\r\n  constructor(options: PopoverOptions) {\r\n    this.options = options\r\n  }\r\n\r\n\r\n  // Shows the popover on the specified position. Renders it if not already\r\n  show() {\r\n    if (this.isHidden) {\r\n      if (!this.el) {\r\n        this.render()\r\n      }\r\n      this.el.style.display = ''\r\n      this.position()\r\n      this.isHidden = false\r\n      this.trigger('show')\r\n    }\r\n  }\r\n\r\n\r\n  // Hides the popover, through CSS, but does not remove it from the DOM\r\n  hide() {\r\n    if (!this.isHidden) {\r\n      this.el.style.display = 'none'\r\n      this.isHidden = true\r\n      this.trigger('hide')\r\n    }\r\n  }\r\n\r\n\r\n  // Creates `this.el` and renders content inside of it\r\n  render() {\r\n    let options = this.options\r\n    let el = this.el = createElement('div', {\r\n      className: 'fc-popover ' + (options.className || ''),\r\n      style: {\r\n        top: '0',\r\n        left: '0'\r\n      }\r\n    })\r\n\r\n    if (typeof options.content === 'function') {\r\n      options.content(el)\r\n    }\r\n\r\n    options.parentEl.appendChild(el)\r\n\r\n    // when a click happens on anything inside with a 'fc-close' className, hide the popover\r\n    listenBySelector(el, 'click', '.fc-close', (ev) => {\r\n      this.hide()\r\n    })\r\n\r\n    if (options.autoHide) {\r\n      document.addEventListener('mousedown', this.documentMousedown)\r\n    }\r\n  }\r\n\r\n\r\n  // Triggered when the user clicks *anywhere* in the document, for the autoHide feature\r\n  documentMousedown = (ev) => {\r\n    // only hide the popover if the click happened outside the popover\r\n    if (this.el && !this.el.contains(ev.target)) {\r\n      this.hide()\r\n    }\r\n  }\r\n\r\n\r\n  // Hides and unregisters any handlers\r\n  destroy() {\r\n    this.hide()\r\n\r\n    if (this.el) {\r\n      removeElement(this.el)\r\n      this.el = null\r\n    }\r\n\r\n    document.removeEventListener('mousedown', this.documentMousedown)\r\n  }\r\n\r\n\r\n  // Positions the popover optimally, using the top/left/right options\r\n  position() {\r\n    let options = this.options\r\n    let el = this.el\r\n    let elDims = el.getBoundingClientRect() // only used for width,height\r\n    let origin = computeRect(el.offsetParent)\r\n    let clippingRect = computeClippingRect(options.parentEl)\r\n    let top // the \"position\" (not \"offset\") values for the popover\r\n    let left //\r\n\r\n    // compute top and left\r\n    top = options.top || 0\r\n    if (options.left !== undefined) {\r\n      left = options.left\r\n    } else if (options.right !== undefined) {\r\n      left = options.right - elDims.width // derive the left value from the right value\r\n    } else {\r\n      left = 0\r\n    }\r\n\r\n    // constrain to the view port. if constrained by two edges, give precedence to top/left\r\n    top = Math.min(top, clippingRect.bottom - elDims.height - this.margin)\r\n    top = Math.max(top, clippingRect.top + this.margin)\r\n    left = Math.min(left, clippingRect.right - elDims.width - this.margin)\r\n    left = Math.max(left, clippingRect.left + this.margin)\r\n\r\n    applyStyle(el, {\r\n      top: top - origin.top,\r\n      left: left - origin.left\r\n    })\r\n  }\r\n\r\n\r\n  // Triggers a callback. Calls a function in the option hash of the same name.\r\n  // Arguments beyond the first `name` are forwarded on.\r\n  // TODO: better code reuse for this. Repeat code\r\n  // can kill this???\r\n  trigger(name) {\r\n    if (this.options[name]) {\r\n      this.options[name].apply(this, Array.prototype.slice.call(arguments, 1))\r\n    }\r\n  }\r\n\r\n}\r\n","import {\r\n  DateProfile,\r\n  EventStore,\r\n  EventUiHash,\r\n  DateSpan,\r\n  EventInteractionState,\r\n  //DayTable, //hiedra\r\n  Duration,\r\n  DateComponent,\r\n  DateRange,\r\n  Slicer,\r\n  Hit,\r\n  ComponentContext\r\n} from '@fullcalendar/core'\r\nimport { default as DayGrid, DayGridSeg } from './DayGrid'\r\nimport { default as DayTable } from \"./DayTable\"; //hiedra\r\n\r\nexport interface SimpleDayGridProps {\r\n  dateProfile: DateProfile | null\r\n  dayTable: DayTable\r\n  nextDayThreshold: Duration\r\n  businessHours: EventStore\r\n  eventStore: EventStore\r\n  eventUiBases: EventUiHash\r\n  dateSelection: DateSpan | null\r\n  eventSelection: string\r\n  eventDrag: EventInteractionState | null\r\n  eventResize: EventInteractionState | null\r\n  isRigid: boolean\r\n}\r\n\r\nexport default class SimpleDayGrid extends DateComponent<SimpleDayGridProps> {\r\n\r\n  dayGrid: DayGrid\r\n\r\n  private slicer = new DayGridSlicer()\r\n\r\n  constructor(context: ComponentContext, dayGrid: DayGrid) {\r\n    super(context, dayGrid.el)\r\n\r\n    this.dayGrid = dayGrid\r\n\r\n    context.calendar.registerInteractiveComponent(this, { el: this.dayGrid.el })\r\n  }\r\n\r\n  destroy() {\r\n    super.destroy()\r\n\r\n    this.calendar.unregisterInteractiveComponent(this)\r\n  }\r\n\r\n  render(props: SimpleDayGridProps) {\r\n    let { dayGrid } = this\r\n    let { dateProfile, dayTable } = props\r\n\r\n    dayGrid.receiveProps({\r\n      ...this.slicer.sliceProps(props, dateProfile, props.nextDayThreshold, dayGrid, dayTable),\r\n      dateProfile,\r\n      cells: dayTable.cells,\r\n      isRigid: props.isRigid\r\n    })\r\n  }\r\n\r\n  buildPositionCaches() {\r\n    this.dayGrid.buildPositionCaches()\r\n  }\r\n\r\n  queryHit(positionLeft: number, positionTop: number): Hit {\r\n    let rawHit = this.dayGrid.positionToHit(positionLeft, positionTop)\r\n\r\n    if (rawHit) {\r\n      return {\r\n        component: this.dayGrid,\r\n        dateSpan: rawHit.dateSpan,\r\n        dayEl: rawHit.dayEl,\r\n        rect: {\r\n          left: rawHit.relativeRect.left, //+ (positionLeft - this.dayGrid.colPositions.lefts[0]),\r\n          right: rawHit.relativeRect.right, // + (positionLeft - this.dayGrid.colPositions.lefts[0]),\r\n          top: rawHit.relativeRect.top,\r\n          bottom: rawHit.relativeRect.bottom\r\n        },\r\n        layer: 0\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\nexport class DayGridSlicer extends Slicer<DayGridSeg, [DayTable]> {\r\n\r\n  sliceRange(dateRange: DateRange, dayTable: DayTable): DayGridSeg[] {\r\n    return dayTable.sliceRange(dateRange)\r\n  }\r\n\r\n}\r\n","import {\r\n  htmlEscape, cssToStr,\r\n  FgEventRenderer,\r\n  Seg\r\n} from '@fullcalendar/core'\r\n\r\n\r\n/* Event-rendering methods for the DayGrid class\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\n// \"Simple\" is bad a name. has nothing to do with SimpleDayGrid\r\nexport default abstract class SimpleDayGridEventRenderer extends FgEventRenderer {\r\n\r\n\r\n  // Builds the HTML to be used for the default element for an individual segment\r\n  renderSegHtml(seg: Seg, mirrorInfo) {\r\n    let { view, options } = this.context\r\n    let eventRange = seg.eventRange\r\n    let eventDef = eventRange.def\r\n    let eventUi = eventRange.ui\r\n    let allDay = eventDef.allDay\r\n    let isDraggable = view.computeEventDraggable(eventDef, eventUi)\r\n    let isResizableFromStart = allDay && seg.isStart && view.computeEventStartResizable(eventDef, eventUi)\r\n    let isResizableFromEnd = allDay && seg.isEnd && view.computeEventEndResizable(eventDef, eventUi)\r\n    let classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd, mirrorInfo)\r\n    let skinCss = cssToStr(this.getSkinCss(eventUi))\r\n    let timeHtml = ''\r\n    let timeText\r\n    let titleHtml\r\n\r\n    classes.unshift('fc-day-grid-event', 'fc-h-event')\r\n\r\n    // Only display a timed events time if it is the starting segment\r\n    if (seg.isStart) {\r\n      timeText = this.getTimeText(eventRange)\r\n      if (timeText) {\r\n        timeHtml = '<span class=\"fc-time\">' + htmlEscape(timeText) + '</span>'\r\n      }\r\n    }\r\n\r\n    titleHtml =\r\n      '<span class=\"fc-title\">' +\r\n        (htmlEscape(eventDef.title || '') || '&nbsp;') + // we always want one line of height\r\n      '</span>'\r\n\r\n    return '<a class=\"' + classes.join(' ') + '\"' +\r\n        (eventDef.url ?\r\n          ' href=\"' + htmlEscape(eventDef.url) + '\"' :\r\n          ''\r\n          ) +\r\n        (skinCss ?\r\n          ' style=\"' + skinCss + '\"' :\r\n          ''\r\n          ) +\r\n      '>' +\r\n        '<div class=\"fc-content\">' +\r\n          (options.dir === 'rtl' ?\r\n            titleHtml + ' ' + timeHtml : // put a natural space in between\r\n            timeHtml + ' ' + titleHtml   //\r\n            ) +\r\n        '</div>' +\r\n        (isResizableFromStart ?\r\n          '<div class=\"fc-resizer fc-start-resizer\"></div>' :\r\n          ''\r\n          ) +\r\n        (isResizableFromEnd ?\r\n          '<div class=\"fc-resizer fc-end-resizer\"></div>' :\r\n          ''\r\n          ) +\r\n      '</a>'\r\n  }\r\n\r\n\r\n  // Computes a default event time formatting string if `eventTimeFormat` is not explicitly defined\r\n  computeEventTimeFormat() {\r\n    return {\r\n      hour: 'numeric',\r\n      minute: '2-digit',\r\n      omitZeroMinute: true,\r\n      meridiem: 'narrow'\r\n    }\r\n  }\r\n\r\n\r\n  computeDisplayEventEnd() {\r\n    return false // TODO: somehow consider the originating DayGrid's column count\r\n  }\r\n\r\n}\r\n","// extracted by mini-css-extract-plugin","import './main.scss'\r\n\r\nimport {createPlugin} from '@fullcalendar/core'\r\nimport DayGridView from \"./DayGridView\";\r\n\r\nexport default createPlugin({\r\n    defaultView: 'year',\r\n    views: {\r\n\r\n        yearGrid: DayGridView,\r\n\r\n        year: {\r\n            type: 'yearGrid',\r\n            duration: {years: 1}\r\n        }\r\n    }\r\n})\r\n","module.exports = @fullcalendar/core;","module.exports = moment;"],"sourceRoot":""}